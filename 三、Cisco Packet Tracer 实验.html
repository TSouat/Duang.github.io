<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>三、Cisco Packet Tracer 实验</title><link href='https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; tab-size: 4; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; padding-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.html-for-mac .inline-math-svg .MathJax_SVG { vertical-align: 0.2px; }
.md-math-block .MathJax_SVG_Display { text-align: center; margin: 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; overflow-y: hidden; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: var(--monospace); }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; overflow-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none 0s ease 0s; }
.MathJax_SVG_Display svg { vertical-align: middle !important; margin-bottom: 0px !important; margin-top: 0px !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
mark .md-meta { color: rgb(0, 0, 0); opacity: 0.3 !important; }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-require-zoom-fix foreignobject { font-size: var(--mermaid-font-zoom); }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.loli.net/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border-top: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    table,
    pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #E6F0FE;
}

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

 :root {--mermaid-font-zoom:1.23958em ;} 
</style>
</head>
<body class='typora-export os-windows'>
<div id='write'  class=''><h1><a name="三cisco-packet-tracer-实验" class="md-header-anchor"></a><span>三、Cisco Packet Tracer 实验</span></h1><h2><a name="直接连接两台-pc-构建-lan" class="md-header-anchor"></a><span>直接连接两台 PC 构建 LAN</span></h2><p><span>将两台 PC 直接连接构成一个网络。注意：直接连接需使用交叉线。</span></p><p><span>进行两台 PC 的基本网络配置，只需要配置 IP 地址即可，然后相互 </span><code>ping</code><span> 通即成功。</span></p><p><img src="\Duang.github.io\图片\image-20220103191559558.png" referrerpolicy="no-referrer" alt="image-20220103191559558"></p><h2><a name="用交换机构建-lan" class="md-header-anchor"></a><span>用交换机构建 LAN</span></h2><p><span>构建如下拓扑结构的局域网：</span></p><p><img src="\Duang.github.io\图片\image-20220103191904750.png" referrerpolicy="no-referrer" alt="image-20220103191904750"></p><p><span>✎ </span><strong><span>问题</span></strong></p><ol start='' ><li><span>PC0 能否 </span><code>ping</code><span> 通 PC1、PC2、PC3 ？</span></li></ol><p><span>PC0pingPC1可以ping通：</span></p><p><img src="\Duang.github.io\图片\image-20220103192046348.png" referrerpolicy="no-referrer" alt="image-20220103192046348"></p><p><span>PC0pingPC2, PC0pingPC3不可ping通 </span></p><p><img src="\Duang.github.io\图片\image-20220103192111545.png" referrerpolicy="no-referrer" alt="image-20220103192111545"></p><ol start='2' ><li><span>PC3 能否 </span><code>ping</code><span> 通 PC0、PC1、PC2 ？为什么？</span></li></ol><p><img src="\Duang.github.io\图片\image-20220103192152761.png" referrerpolicy="no-referrer" alt="image-20220103192152761"></p><p>&nbsp;</p><p><span>PC1、PC2与子网掩码相与结果为192.168.1.0； </span></p><p><span>PC3、PC4与子网掩码相与结果为192.168.2.0。 </span></p><p><span>因此PC2和PC3的网络号相同，都处于同一子网内，所以可以通信，可以 ping通。 </span></p><p><span>  PC3和PC0、PC1的网络号不同，没有处于同一子网内，所以ping不通。</span></p><ol start='3' ><li><span>将 4 台 PC 的掩码都改为 </span><code>255.255.0.0</code><span> ，它们相互能 </span><code>ping</code><span> 通吗？为什么？</span></li></ol><p><span>PC0与其他相ping的结果： </span></p><p><img src="\Duang.github.io\图片\image-20220103192241790.png" referrerpolicy="no-referrer" alt="image-20220103192241790"></p><p><span>PC1与其他PC机相ping结果： </span></p><p><img src="\Duang.github.io\图片\image-20220103192255816.png" referrerpolicy="no-referrer" alt="image-20220103192255816"></p><p><span>PC2与其他相ping结果：</span></p><p><img src="\Duang.github.io\图片\image-20220103192307892.png" referrerpolicy="no-referrer" alt="image-20220103192307892"></p><p><span>PC3与其他相ping结果：</span></p><p><img src="\Duang.github.io\图片\image-20220103192336070.png" referrerpolicy="no-referrer" alt="image-20220103192336070"></p><p><span>由图可得，所有PC机都可以相ping通，所有PC机与子网掩码相与得到</span></p><p><span>的网络号都为192.169.0.0，网络号相同，处于同一通信子网，故都可以ping通。</span></p><ol start='4' ><li><span>使用二层交换机连接的网络需要配置网关吗？为什么？</span></li></ol><p><span>在二层交换机配置网关网络互联。没有网关，本机所辖主机，无法与其它网络通信。 </span></p><h2><a name="交换机接口地址列表" class="md-header-anchor"></a><span>交换机接口地址列表</span></h2><p><span>二层交换机是一种即插即用的多接口设备，它对于收到的帧有 3 种处理方式：广播、转发和丢弃（请弄清楚何时进行何种操作）。那么，要转发成功，则交换机中必须要有接口地址列表即 MAC 表，该表是交换机通过学习自动得到的！</span></p><p><span>仍然构建上图的拓扑结构，并配置各计算机的 IP 在同一个一个子网，使用工具栏中的放大镜点击某交换机如左边的 Switch3，选择 </span><code>MAC Table</code><span>，可以看到最初交换机的 MAC 表是空的，也即它不知道该怎样转发帧（那么它将如何处理？），用 PC0 访问（</span><code>ping</code><span>）PC1 后，再查看该交换机的 MAC 表，现在有相应的记录，请思考如何得来。随着网络通信的增加，各交换机都将生成自己完整的 MAC 表，此时交换机的交换速度就是最快的！</span></p><p><span>重新构建一个拓扑图 </span></p><p><span>PC0未与PC1ping时：</span></p><p><img src="\Duang.github.io\图片\image-20220103194746940.png" referrerpolicy="no-referrer" alt="image-20220103194746940"></p><p><span>PC0与PC1ping之后： </span></p><p><img src="\Duang.github.io\图片\image-20220103194806658.png" referrerpolicy="no-referrer" alt="image-20220103194806658"></p><h2><a name="生成树协议spanning-tree-protocol）" class="md-header-anchor"></a><span>生成树协议（Spanning Tree Protocol）</span></h2><p><span>交换机在目的地址未知或接收到广播帧时是要进行广播的。如果交换机之间存在回路/环路，那么就会产生广播循环风暴，从而严重影响网络性能。</span></p><p><span>而交换机中运行的 STP 协议能避免交换机之间发生广播循环风暴。</span></p><p><span>只使用交换机，构建如下拓扑：</span></p><p><img src="\Duang.github.io\图片\image-20220103194847113.png" referrerpolicy="no-referrer" alt="image-20220103194847113"></p><p><span>这是初始时的状态。我们可以看到交换机之间有回路，这会造成广播帧循环传送即形成广播风暴，严重影响网络性能。</span></p><p><span>随后，交换机将自动通过生成树协议（STP）对多余的线路进行自动阻塞（Blocking），以形成一棵以 Switch4 为根（具体哪个是根交换机有相关的策略）的具有唯一路径树即生成树！</span></p><p><span>经过一段时间，随着 STP 协议成功构建了生成树后，Switch5 的两个接口当前物理上是连接的，但逻辑上是不通的，处于Blocking状态（桔色）如下图所示：</span></p><p><img src="\Duang.github.io\图片\image-20220103194908533.png" referrerpolicy="no-referrer" alt="image-20220103194908533"></p><p><span>在网络运行期间，假设某个时候 Switch4 与 Switch5 之间的物理连接出现问题（将 </span></p><p><span>Switch4 与 Switch5 的连线剪掉），则该生成树将自动发生变化。Switch5 上方先前 </span></p><p><span>Blocking 的那个接口现在活动了（绿色），但下方那个接口仍处于 Blocking 状态（桔色）。如下图所示：</span></p><p><img src="\Duang.github.io\图片\image-20220103194923897.png" referrerpolicy="no-referrer" alt="image-20220103194923897"></p><p><span>🗣 </span><strong><span>注意</span></strong></p><p><span>交换机的 STP 协议即生成树协议始终自动保证交换机之间不会出现回路，从而形成广播风暴。</span></p><h2><a name="路由器配置初步" class="md-header-anchor"></a><span>路由器配置初步</span></h2><p><span>我们模拟重庆交通大学和重庆大学两个学校的连接，构建如下拓扑：</span></p><p><img src="\Duang.github.io\图片\image-20220103195051049.png" referrerpolicy="no-referrer" alt="image-20220103195051049"></p><ul><li><span>说明一</span></li></ul><p><span>交通大学与重庆大学显然是两个不同的子网。在不同子网间通信需通过路由器。</span></p><p><span>路由器的每个接口下至少是一个子网，图中我们简单的规划了 3 个子网：</span></p><ol start='' ><li><span>左边路由器是交通大学的，其下使用交换机连接交通大学的网络，分配网络号 </span><code>192.168.1.0/24</code><span>，该路由器接口也是交通大学网络的网关，分配 IP 为 </span><code>192.168.1.1</code></li><li><span>右边路由器是重庆大学的，其下使用交换机连接重庆大学的网络，分配网络号 </span><code>192.168.3.0/24</code><span>，该路由器接口也是重庆大学网络的网关，分配 IP 为 </span><code>192.168.3.1</code></li><li><span>两个路由器之间使用广域网接口相连，也是一个子网，分配网络号 </span><code>192.168.2.0/24</code></li></ol><ul><li><span>说明二</span></li></ul><p><span>现实中，交通大学和重庆大学的连接是远程的。该连接要么通过路由器的光纤接口，要么通过广域网接口即所谓的 </span><code>serial</code><span> 口（如拓扑图所示）进行，一般不会通过双绞线连接（为什么？）。</span></p><p><span>下面我们以通过路由器的广域网口连接为例来进行相关配置。请注意：我们选用的路由器默认没有广域网模块（名称为 </span><code>WIC-1T</code><span> 等），需要关闭路由器后添加，然后再开机启动。</span></p><p><img src="\Duang.github.io\图片\image-20220103195432986.png" referrerpolicy="no-referrer" alt="image-20220103195432986"></p><ul><li><span>说明三</span></li></ul><p><span>在模拟的广域网连接中需注意 DCE 和 DTE 端（连线时线路上有提示，带一个时钟标志的是 DCE 端。有关 DCE 和 DTE 的概念请查阅相关资料。），在 DCE 端需配置时钟频率 </span><code>64000</code></p><p><img src="\Duang.github.io\图片\image-20220103195442455.png" referrerpolicy="no-referrer" alt="image-20220103195442455"></p><ul><li><span>说明四</span></li></ul><p><span>路由器有多种命令行配置模式，每种模式对应不同的提示符及相应的权限。</span></p><p><span>请留意在正确的模式下输入配置相关的命令。</span></p><ul><li><span>User mode：用户模式</span></li><li><span>Privileged mode：特权模式</span></li><li><span>Global configuration mode：全局配置模式</span></li><li><span>Interface mode：接口配置模式</span></li><li><span>Subinterface mode：子接口配置模式</span></li></ul><ul><li><span>说明五</span></li></ul><p><span>在现实中，对新的路由器，显然不能远程进行配置，我们必须在现场通过笔记本的串口与路由器的 console 接口连接并进行初次的配置（注意设置比特率为9600）后，才能通过网络远程进行配置。这也是上图左上画出笔记本连接的用意。</span></p><ul><li><span>说明六</span></li></ul><p><span>在路由器的 </span><code>CLI</code><span> 界面中，可看到路由器刚启动成功后，因为无任何配置，将会提示是否进行对话配置（Would you like to enter the initial configuration dialog?），因其步骤繁多，请选择 NO</span></p><p><img src="\Duang.github.io\图片\clip_image002.gif" referrerpolicy="no-referrer" alt="img">
<span>拓扑图中路由器各接口配置数据如下：</span></p><p><img src="\Duang.github.io\图片\image-20220103195225902.png" referrerpolicy="no-referrer" alt="image-20220103195225902"></p><p><span>拓扑图中各 PC 配置数据如下：</span></p><p><img src="C:\Users\Duang\AppData\Roaming\Typora\typora-user-images\image-20220103195239969.png" referrerpolicy="no-referrer" alt="image-20220103195239969"></p><p><span>交通大学路由器基本配置如下：</span></p><p><span>以太网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;enable &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#configure terminal &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#interface f0/0 &nbsp; // 进入配置以太网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 192.168.1.1 255.255.255.0 &nbsp; // 配置该接口的 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#^z &nbsp; // 直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><p><span>广域网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 进入配置广域网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 192.168.2.1 255.255.255.0 &nbsp; //配置该接口的 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#clock rate 64000 &nbsp;  // 其为 DCE 端，配置时钟频率</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#^z &nbsp; // 直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 181px;"></div><div class="CodeMirror-gutters" style="display: none; height: 181px;"></div></div></div></pre><p><span>重庆大学路由器基本配置如下：</span></p><p><span>以太网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int f0/0 &nbsp; // 进入配置以太网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 192.168.3.1 255.255.255.0 &nbsp; // 配置该接口的 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#^z &nbsp; // 直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><p><span>广域网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 进入配置广域网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 192.168.2.2 255.255.255.0 &nbsp; //配置该接口的 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#^z &nbsp; // 直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><p><span>至此，路由器基本的配置完成。请按照上面 PC 配置表继续配置各个 PC 。</span></p><p><img src="\Duang.github.io\图片\image-20220103195751878.png" referrerpolicy="no-referrer" alt="image-20220103195751878"></p><h2><a name="静态路由" class="md-header-anchor"></a><span>静态路由</span></h2><p><span>静态路由是非自适应性路由协议，是由网络管理人员手动配置的，不能够根据网络拓扑的变化而改变。 因此，静态路由简单高效，适用于结构非常简单的网络。</span></p><p><span>在当前这个简单的拓扑结构中我们可以使用静态路由，即直接告诉路由器到某网络该怎么走即可。</span></p><p><span>在前述路由器基本配置成功的情况下使用以下命令进行静态路由协议的配置：</span></p><h3><a name="交通大学路由器静态路由配置" class="md-header-anchor"></a><span>交通大学路由器静态路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#ip route 192.168.3.0 255.255.255.0 192.168.2.2 &nbsp; // 告诉交通大学路由器到 192.168.3.0 这个网络的下一跳是 192.168.2.2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#exit &nbsp; //退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 136px;"></div><div class="CodeMirror-gutters" style="display: none; height: 136px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103195933543.png" referrerpolicy="no-referrer" alt="image-20220103195933543"></p><h3><a name="重庆大学路由器静态路由配置" class="md-header-anchor"></a><span>重庆大学路由器静态路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#ip route 192.168.1.0 255.255.255.0 192.168.2.1 &nbsp; // 告诉重庆大学路由器到 192.168.1.0 这个网络的下一跳是 192.168.2.1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#exit &nbsp; //退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 136px;"></div><div class="CodeMirror-gutters" style="display: none; height: 136px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\clip_image02.gif" referrerpolicy="no-referrer" alt="img"></p><p><img src="\Duang.github.io\图片\image-20220103200156041.png" referrerpolicy="no-referrer" alt="image-20220103200156041"></p><p><img src="\Duang.github.io\图片\image-20220103200212936.png" referrerpolicy="no-referrer" alt="image-20220103200212936"></p><h2><a name="动态路由-rip" class="md-header-anchor"></a><span>动态路由 RIP</span></h2><p><span>动态路由协议采用自适应路由算法，能够根据网络拓扑的变化而重新计算机最佳路由。</span></p><p><span>RIP 的全称是 Routing Information Protocol，是距离矢量路由的代表（目前虽然淘汰，但可作为我们学习的对象）。使用 RIP 协议只需要告诉路由器直接相连有哪些网络即可，然后 RIP 根据算法自动构建出路由表。</span></p><p><span>因为我们模拟的网络非常简单，因此不能同时使用静态和动态路由，否则看不出效果，所以我们需要把刚才配置的静态路由先清除掉。</span></p><p><span>清除静态路由配置：</span></p><ol start='' ><li><span>直接关闭路由器电源。相当于没有保存任何配置，然后各接口再按照前面基本配置所述重新配置 IP 等参数（推荐此方法，可以再熟悉一下接口的配置命令）；</span></li><li><span>使用 </span><code>no</code><span> 命令清除静态路由。在全局配置模式下，交通大学路由器使用：</span><code>no ip route 192.168.3.0 255.255.255.0 192.168.2.2</code><span>，重庆大学路由器使用：</span><code>no ip route 192.168.1.0 255.255.255.0 192.168.2.1</code><span> 。相当于使用 </span><code>no</code><span> 命令把刚才配置的静态路由命令给取消。</span></li></ol><p><img src="\Duang.github.io\图片\image-20220103200346821.png" referrerpolicy="no-referrer" alt="image-20220103200346821"></p><h3><a name="交通大学路由器-rip-路由配置" class="md-header-anchor"></a><span>交通大学路由器 RIP 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router rip &nbsp; // 启用 RIP 路由协议，注意是 router 命令</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.1.0 &nbsp; // 网络 192.168.1.0 与我直连</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.2.0 &nbsp; // 网络 192.168.2.0 与我直连</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#^z &nbsp; //直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><h3><a name="重庆大学路由器-rip-路由配置" class="md-header-anchor"></a><span>重庆大学路由器 RIP 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router rip &nbsp; // 启用RIP路由协议，注意是 router 命令</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.3.0 &nbsp; // 网络 192.168.3.0 与我直连</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.2.0 &nbsp; // 网络 192.168.2.0 与我直连</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#^z &nbsp; //直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><p><span>查看路由表你可看到标记为 </span><code>R</code><span> 的一条路由，</span><code>R</code><span> 表示 RIP 。</span></p><p><span>至此，这些 PC 也能全部相互 </span><code>ping</code><span> 通！</span></p><h2><a name="动态路由-ospf" class="md-header-anchor"></a><span>动态路由 OSPF</span></h2><p><span>OSPF（Open Shortest Path First 开放式最短路径优先）是一个内部网关协议（Interior Gateway Protocol，简称 IGP）， 用于在单一自治系统（Autonomous System，AS）内决策路由。OSPF 性能优于 RIP，是当前域内路由广泛使用的路由协议。</span></p><p><span>同样的，我们需要把刚才配置的 RIP 路由先清除掉。</span></p><h3><a name="清除-rip-路由配置" class="md-header-anchor"></a><span>清除 RIP 路由配置：</span></h3><ol start='' ><li><span>直接关闭路由器电源。相当于没有保存任何配置，然后各接口再按照前面基本配置所述重新配置 IP 等参数</span></li><li><span>使用 </span><code>no</code><span> 命令清除 RIP 路由。在全局配置模式下，各路由器都使用：</span><code>no router rip</code><span> 命令进行清除</span></li></ol><h3><a name="交通大学路由器-ospf-路由配置" class="md-header-anchor"></a><span>交通大学路由器 OSPF 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router ospf 1 &nbsp; // 启用 OSPF 路由协议，进程号为1（可暂不理会进程号概念）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.1.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于 192.168.1.0/24 网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.2.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于 192.168.2.0/24 网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#^z &nbsp; //直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 203px;"></div><div class="CodeMirror-gutters" style="display: none; height: 203px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103200520549.png" referrerpolicy="no-referrer" alt="image-20220103200520549"></p><p><img src="\Duang.github.io\图片\image-20220103200537195.png" referrerpolicy="no-referrer" alt="image-20220103200537195"></p><h3><a name="重庆大学路由器-ospf-路由配置" class="md-header-anchor"></a><span>重庆大学路由器 OSPF 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router ospf 1 &nbsp; // 启用 OSPF 路由协议，进程号为1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.3.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于 192.168.3.0/24 网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.2.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于 192.168.2.0/24 网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#^z &nbsp; //直接退到特权模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#show ip route &nbsp;  //查看路由表</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 203px;"></div><div class="CodeMirror-gutters" style="display: none; height: 203px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103200605445.png" referrerpolicy="no-referrer" alt="image-20220103200605445"></p><p><span>查看路由表你可看到标记为 O 的一条路由，O 表示 OSPF 。</span></p><p><span>至此，这些 PC 能全部相互 </span><code>ping</code><span> 通！</span></p><p><img src="\Duang.github.io\图片\image-20220103200621856.png" referrerpolicy="no-referrer" alt="image-20220103200621856"></p><h2><a name="基于端口的网络地址翻译-pat" class="md-header-anchor"></a><span>基于端口的网络地址翻译 PAT</span></h2><p><span>网络地址转换（NAT，Network Address Translation）被各个 Internet 服务商即 ISP 广泛应用于它们的网络中，也包括 WiFi 网络。 原因很简单，NAT 不仅完美地解决了 lP 地址不足的问题，而且还能够有效地避免来自网络外部的攻击，隐藏并保护网络内部的计算机。</span></p><p><span>NAT 的实现方式一般有三种：</span></p><ul><li><span>静态转换： Static NAT</span></li><li><span>动态转换： Dynamic NAT</span></li><li><span>端口多路复用： OverLoad</span></li></ul><p><span>端口多路复用使用最多也最灵活。OverLoad 是指不仅改变发向 Internet 数据包的源 IP 地址，同时还改变其源端口，即进行了端口地址转换（PAT，Port Address Translation）。</span></p><p><span>采用端口多路复用方式，内部网络的所有主机均可共享一个合法外部 IP 地址实现对 Internet 的访问，从而可以最大限度地节约IP地址资源。 同时，又可隐藏网络内部的所有主机，有效避免来自 Internet 的攻击。因此，目前网络中应用最多的就是端口多路复用方式。</span></p><p><span>我们仍然使用重庆交通大学和重庆大学两个学校的拓扑进行 PAT 实验。我们需要保证两个学校的路由已经配置成功，无论使用静态路由还是动态路由，以下我们给出完整的配置过程：设定这两个学校的路由器使用 OSPF 协议，模拟交通大学使用内部 IP 地址（</span><code>192.168.1.0/24</code><span>），模拟重庆大学使用外部 IP 地址（</span><code>8.8.8.0/24</code><span>），两个路由器之间使用外部 IP 地址（</span><code>202.202.240.0/24</code><span>），在交通大学的出口位置即广域网口实施 PAT。</span></p><p><span>拓扑图中各 PC 配置数据如下：</span></p><figure><table><thead><tr><th><strong><span>节点名</span></strong></th><th><strong><span>IP</span></strong></th><th><strong><span>子网掩码</span></strong></th><th><strong><span>网关</span></strong></th></tr></thead><tbody><tr><td><span>交通大学 PC0</span></td><td><span>192.168.1.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>交通大学 PC1</span></td><td><span>192.168.1.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>重庆大学 PC2</span></td><td><span>8.8.8.2</span></td><td><span>255.255.255.0</span></td><td><span>8.8.8.1</span></td></tr><tr><td><span>重庆大学 PC3</span></td><td><span>8.8.8.3</span></td><td><span>255.255.255.0</span></td><td><span>8.8.8.1</span></td></tr></tbody></table></figure><p><span>拓扑图中路由器各接口配置数据如下：</span></p><figure><table><thead><tr><th><strong><span>接口名</span></strong></th><th><strong><span>IP</span></strong></th><th><strong><span>子网掩码</span></strong></th></tr></thead><tbody><tr><td><span>交通大学 Router2 以太网口</span></td><td><span>192.168.1.1</span></td><td><span>255.255.255.0</span></td></tr><tr><td><span>交通大学 Router2 广域网口</span></td><td><span>202.202.240.1</span></td><td><span>255.255.255.0</span></td></tr><tr><td><span>重庆大学 Router3 以太网口</span></td><td><span>8.8.8.1</span></td><td><span>255.255.255.0</span></td></tr><tr><td><span>重庆大学 Router3 广域网口</span></td><td><span>202.202.240.2</span></td><td><span>255.255.255.0</span></td></tr></tbody></table></figure><h3><a name="交通大学路由器接口配置如下" class="md-header-anchor"></a><span>交通大学路由器接口配置如下：</span></h3><p><span>以太网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int f0/0 &nbsp; // 进入配置以太网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 192.168.1.1 255.255.255.0 &nbsp; // 配置 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103200827854.png" referrerpolicy="no-referrer" alt="image-20220103200827854"></p><p><span>广域网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 进入配置广域网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 202.202.240.1 255.255.255.0 &nbsp; //配置 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#clock rate 64000 &nbsp;  // 其为 DCE 端，配置时钟频率</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 136px;"></div><div class="CodeMirror-gutters" style="display: none; height: 136px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103200846134.png" referrerpolicy="no-referrer" alt="image-20220103200846134"></p><h3><a name="重庆大学路由器接口配置如下" class="md-header-anchor"></a><span>重庆大学路由器接口配置如下：</span></h3><p><span>以太网口：</span></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int f0/0 &nbsp; // 进入配置以太网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 8.8.8.1 255.255.255.0 &nbsp; // 配置 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103200916650.png" referrerpolicy="no-referrer" alt="image-20220103200916650"></p><p><span>广域网口：</span></p><p><img src="\Duang.github.io\图片\image-20220103200931653.png" referrerpolicy="no-referrer" alt="image-20220103200931653"></p><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 进入配置广域网口模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip address 202.202.240.2 255.255.255.0 &nbsp; // 配置 IP</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#no shutdown &nbsp; // 激活接口</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 113px;"></div></div></div></pre><h3><a name="交通大学路由器-ospf-路由配置-n745" class="md-header-anchor"></a><span>交通大学路由器 OSPF 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router ospf 1 &nbsp; // 启用 OSPF 路由协议，进程号为1（可暂不理会进程号概念）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 192.168.1.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于192.168.1.0/24网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 202.202.240.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于202.202.240.0/24网络的所有主机（反向掩码）参与 OSPF</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><h3><a name="重庆大学路由器-ospf-路由配置-n747" class="md-header-anchor"></a><span>重庆大学路由器 OSPF 路由配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#router ospf 1 &nbsp; // 启用 OSPF 路由协议，进程号为1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 202.202.240.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于202.202.240.0/24网络的所有主机（反向掩码）参与 OSPF</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-router)#network 8.8.8.0 0.0.0.255 area 0 &nbsp; // 自治域0中的属于8.8.8.0/24网络的所有主机（反向掩码）参与 OSPF</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 158px;"></div><div class="CodeMirror-gutters" style="display: none; height: 158px;"></div></div></div></pre><p><span>此时，这些 PC 能全部相互 </span><code>ping</code><span> 通！如在交通大学内部使用 PC0（</span><code>192.168.1.2</code><span>）来 </span><code>ping</code><span> 重庆大学的PC2（</span><code>8.8.8.2</code><span>）应该成功。</span></p><p><span>下面我们将重庆大学的路由器看着 Internet 中的骨干路由器，那么这些路由器将不会转发内部/私有 IP 地址的包（直接丢弃）。我们通过在重庆大学路由器上实施访问控制 ACL ，即丢弃来自交通大学（私有 IP 地址）的包来模拟这个丢包的过程。</span></p><h3><a name="重庆大学路由器丢包的配置" class="md-header-anchor"></a><span>重庆大学路由器丢包的配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#access-list 1 deny 192.168.1.0 0.0.0.255  // 创建 ACL 1，丢弃/不转发来自 192.168.1.0/24 网络的所有包</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#access-list 1 permit any  // 添加 ACL 1 的规则，转发其它所有网络的包</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 配置广域网口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip access-group 1 in  // 在广域网口上对进来的包实施 ACL 1 中的规则，实际就是广域网口如果收到来自 192.168.1.0/24 IP的包即丢弃</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 181px;"></div><div class="CodeMirror-gutters" style="display: none; height: 181px;"></div></div></div></pre><p><span>此时，再使用交通大学内部的 PC0（</span><code>192.168.1.2</code><span>）来 </span><code>ping</code><span> 重庆大学的 PC2（</span><code>8.8.8.2</code><span>）就不成功了，会显示目的主机不可到达（</span><code>Destination host unreachable</code><span>）信息。</span></p><p><img src="\Duang.github.io\图片\image-20220103200951099.png" referrerpolicy="no-referrer" alt="image-20220103200951099"></p><h3><a name="交通大学路由器-pat-配置" class="md-header-anchor"></a><span>交通大学路由器 PAT 配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router&gt;en &nbsp; // 从普通模式进入特权模式</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router#conf t &nbsp; // 进入全局配置模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#access-list 1 permit 192.168.1.0 0.0.0.255  // 创建 ACL 1，允许来自 192.168.1.0/24 网络的所有包</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#ip nat inside source list 1 interface s0/0 overload  // 来自于 ACL 中的 IP 将在广域网口实施 PAT</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int f0/0 &nbsp; // 配置以太网口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip nat inside &nbsp; // 配置以太网口为 PAT 的内部</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config)#int s0/0 &nbsp; // 配置广域网口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Router(config-if)#ip nat outside &nbsp; // 配置广域网口为 PAT 的外部</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 226px;"></div><div class="CodeMirror-gutters" style="display: none; height: 226px;"></div></div></div></pre><p><span>现在，再次使用交通大学内部的 PC0（</span><code>192.168.1.2</code><span>）来 </span><code>ping</code><span> 重庆大学的PC2（</span><code>8.8.8.2</code><span>）则OK。</span></p><p><img src="\Duang.github.io\图片\image-20220103201032785.png" referrerpolicy="no-referrer" alt="image-20220103201032785"></p><p><code>ping</code><span> 成功后，在交通大学路由器特权配置模式下使用 </span><code>show ip nat translations</code><span> 可查看这个翻译的过程！</span></p><p><img src="\Duang.github.io\图片\image-20220103201058541.png" referrerpolicy="no-referrer" alt="image-20220103201058541"></p><h2><a name="虚拟局域网-vlan" class="md-header-anchor"></a><span>虚拟局域网 VLAN</span></h2><p><span>在实际网络中（如</span><a href='http://202.202.240.162/plugins/weathermap/view.php'><span>我校的网络</span></a><span>），你可看到路由器一般位于网络的边界，而内部几乎全部使用交换机连接。</span></p><p><span>前面我们分析过，交换机连接的是同一个子网！ 显然，在这样一个大型规模的子网中进行广播甚至产生广播风暴将严重影响网络性能甚至瘫痪。</span></p><p><span>另外我们也已经知道，其实学校是划分了 N 多个子网的，那么这些交换机连接的就绝不是一个子网！这样矛盾的事情该如何解释呢？我们实际上使用了支持 VLAN 的交换机！而前述的交换机只是普通的 2 层交换机（或者我们把它当作 2 层交换机在使用。</span></p><p><span>VLAN（Virtual Local Area Network）即虚拟局域网。通过划分 VLAN，我们可以把一个物理网络划分为多个逻辑网段即多个子网。</span></p><p><span>划分 VLAN 后可以杜绝网络广播风暴，增强网络的安全性，便于进行统一管理等。</span></p><p><span>在 CPT 中构建如下图所示拓扑：</span></p><p><img src="\Duang.github.io\图片\image-20220103201128241.png" referrerpolicy="no-referrer" alt="image-20220103201128241"></p><p><span>Cisco 2960 交换机是支持 VLAN 的交换机，共有 24 个 100M 和 2 个 1000M 以太网口。默认所有的接口都在 </span><code>VLAN 1</code><span> 中，故此时连接上来的计算机都处于同一 VLAN，可以进行通信。</span></p><p><span>下面我们就该交换机的 24 个 100M 接口分为 3 个部分，划分到 3 个不同的 VLAN 中，id 号分别设为 10、20、30，且设置别名（computer、communication、electronic）以利于区分和管理。</span></p><h3><a name="交换机-vlan-配置" class="md-header-anchor"></a><span>交换机 VLAN 配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch&gt;en</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch#conf t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#vlan 10 &nbsp;  // 创建 id 为 10 的 VLAN（缺省的，交换机所有接口都属于VLAN 1，不能使用）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#name computer &nbsp;  // 设置 VLAN 的别名</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int vlan 10 &nbsp;  // 该 VLAN 为一个子网，设置其 IP，作为该子网网关</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#ip address 192.168.0.1 255.255.255.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#vlan 20 &nbsp;  // 创建 id 为 20 的 VLAN</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#name communication &nbsp;  //设置别名</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int vlan 20</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#ip addr 192.168.1.1 255.255.255.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#vlan 30 &nbsp;  // 创建 id 为 20 的 VLAN</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#name electronic &nbsp;  // 设置别名</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-vlan)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int vlan 30</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#ip add 192.168.2.1 255.255.255.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int range f0/1-8 &nbsp;  // 成组配置接口（1-8）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport mode access &nbsp;  // 设置为存取模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport access vlan 10 &nbsp;  // 划归到 VLAN 10 中</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int range f0/9-16</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport mode access</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport access vlan 20</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#int range f0/17-24</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport mode access</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#switchport access vlan 30</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config-if-range)#^Z</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch#show vlan // 查看 VLAN 的划分情况</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 768px;"></div><div class="CodeMirror-gutters" style="display: none; height: 768px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103201200029.png" referrerpolicy="no-referrer" alt="image-20220103201200029"></p><p><span>至此，在该交换机上我们就划分了 3 个 VLAN（不包括缺省的 VLAN 1）。</span></p><p><span>各 VLAN 下 PC 的网络配置及连接的交换机接口如下表：</span></p><figure><table><thead><tr><th><strong><span>机器名</span></strong></th><th><strong><span>连接的接口</span></strong></th><th><strong><span>所属VLAN</span></strong></th><th><strong><span>IP</span></strong></th><th><strong><span>子网掩码</span></strong></th><th><strong><span>网关</span></strong></th></tr></thead><tbody><tr><td><span>PC0</span></td><td><span>F0/1</span></td><td><span>VLAN 10</span></td><td><span>192.168.0.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.0.1</span></td></tr><tr><td><span>PC1</span></td><td><span>F0/2</span></td><td><span>VLAN 10</span></td><td><span>192.168.0.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.0.1</span></td></tr><tr><td><span>PC2</span></td><td><span>F0/17</span></td><td><span>VLAN 30</span></td><td><span>192.168.2.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.2.1</span></td></tr><tr><td><span>PC3</span></td><td><span>F0/9</span></td><td><span>VLAN 20</span></td><td><span>192.168.1.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>PC4</span></td><td><span>F0/10</span></td><td><span>VLAN 20</span></td><td><span>192.168.1.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>PC5</span></td><td><span>F0/18</span></td><td><span>VLAN 30</span></td><td><span>192.168.2.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.2.1</span></td></tr><tr><td><span>PC6</span></td><td><span>F0/19</span></td><td><span>VLAN 30</span></td><td><span>192.168.2.4</span></td><td><span>255.255.255.0</span></td><td><span>192.168.2.1</span></td></tr></tbody></table></figure><p><span>此时可以使用 </span><code>ping</code><span> 命令进行测试，你会发现只有在同一 VLAN 中的 PC 才能通信，且广播也局限于该 VLAN。</span></p><p><img src="\Duang.github.io\图片\image-20220103201232999.png" referrerpolicy="no-referrer" alt="image-20220103201232999"></p><p><span>✎ </span><strong><span>思考</span></strong></p><p><span>分析一下当前为何不同 VLAN 中的 PC 不能通信？网关在此起什么作用？我们的网关又在何处？如何发起广播测试？</span></p><p><span>答：PC0 ping不通 PC 1，PC0可以ping通 PC2，这是因为在同一VLAN下 才可以直接通信，不在同 一VLAN下需要通过路由器或者是三层交换机 配置才可互相通信。</span></p><h2><a name="虚拟局域网管理-vtp" class="md-header-anchor"></a><span>虚拟局域网管理 VTP</span></h2><p><span>前一个实验我们在交换机上进行了 VLAN 的规划和划分。但在实际应用中，我们绝不允许在这些支持VLAN的交换机上进行随意的 VLAN 划分，如此将造成管理混乱！VLAN的划分必须得到统一的规划和管理，这就需要 VTP 协议。</span></p><p><span>VTP（VLAN Trunk Protocol）即 VLAN 中继协议。VTP 通过 ISL 帧或 Cisco 私有 DTP 帧（可查阅相关资料了解）保持 VLAN 配置统一性，也被称为虚拟局域网干道协议，它是思科私有协议。 VTP 统一管理、增加、删除、调整VLAN，自动地将信息向网络中其它的交换机广播。</span></p><p><span>此外，VTP 减小了那些可能导致安全问题的配置，只要在 VTP Server 做相应设置，VTP Client 会自动学习 VTP Server 上的 VLAN 信息。</span></p><p><span>为演示 VTP，重新构建如下拓扑结构：</span></p><p><img src="\Duang.github.io\图片\image-20220103201342955.png" referrerpolicy="no-referrer" alt="image-20220103201342955"></p><p><span>目前该网络都属于 </span><code>VLAN 1</code><span>，也即这些 PC 是可以相互通信的。前面说过，无论对于性能、管理还是安全等而言，现实中我们必须进行 VLAN 划分。</span></p><p><span>现在我们的要求是：新建两个 VLAN，然后让 PC0 和 PC1 属于 </span><code>VLAN 2</code><span>，PC1 和 PC3 属于 </span><code>VLAN 3</code><span>。</span></p><p><span>我们将在核心交换机 3560上进行如下工作：</span></p><ol start='' ><li><span>设置为 </span><code>server</code><span> 模式，VTP 域为 </span><code>cqjtu</code></li><li><span>新建 </span><code>VLAN 2</code><span>，网络号 </span><code>192.168.1.0/24</code><span>，网关 </span><code>192.168.1.1</code></li><li><span>新建 </span><code>VLAN 3</code><span>，网络号 </span><code>192.168.2.0/24</code><span>，网关 </span><code>192.168.2.1</code></li></ol><h3><a name="3560-vtp-server-配置" class="md-header-anchor"></a><span>3560 VTP Server 配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch&gt;en</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch#conf t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#hostname 3560 &nbsp;  // 更改交换机名称（可选）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#vtp domain cqjtu &nbsp; // 设置 VTP 域名称为 cqjtu</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#vtp mode server &nbsp;  // 设置其为 VTP 服务器模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#vlan 2 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 新建VLAN 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-vlan)#name computer // 设置 VLAN 2 的别名（可选）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-vlan)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#vlan 3 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // 再建 VLAN 3</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-vlan)#name communication &nbsp;  //设置 VLAN 2 的别名（可选）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-vlan)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#int vlan 2 &nbsp;  // 配置接口 VLAN 2，它将是该子网（左边）的网关</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#ip address 192.168.1.1 255.255.255.0</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#int vlan 3 &nbsp;  // 配置接口 VLAN 3，它将是该子网（右边）的网关</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#ip address 192.168.2.1 255.255.255.0</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 361px;"></div><div class="CodeMirror-gutters" style="display: none; height: 361px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103201418746.png" referrerpolicy="no-referrer" alt="image-20220103201418746"></p><p><span>我们将在左边交换机 2960A 上进行如下工作：</span></p><ol start='' ><li><span>加入名为 </span><code>cqjtu</code><span> 的 VTP 域</span></li><li><span>配置与核心交换机 3560 连接的千兆接口 </span><code>g0/1</code><span> 为 </span><code>trunk</code><span> 模式</span></li><li><span>将接口 </span><code>f0/1</code><span> 划分到 </span><code>VLAN 2</code><span> 中</span></li><li><span>将接口 </span><code>f0/2</code><span> 划分到 </span><code>VLAN 3</code><span> 中</span></li></ol><h3><a name="2960a左边）-vtp-client-配置" class="md-header-anchor"></a><span>2960A（左边） VTP Client 配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch&gt;en</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch#conf t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#hostname 2960A &nbsp;  // 更改交换机名称（可选）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config)#vtp domain cqjtu &nbsp; // 加入名为 cqjtu 的 VTP 域</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config)#vtp mode client &nbsp;  // 设置模式为 VTP 客户</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config)#int g0/1 &nbsp;  // 配置与核心交换机 3560 连接的 g0/1 千兆接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport mode trunk &nbsp;  // 设置该接口为中继（trunk）模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport trunk allowed vlan all  // 允许为所有的 VLAN 中继</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config)#int f0/1 &nbsp;  // 配置接口 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport mode access &nbsp;  // 设置该接口为正常访问模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport access vlan 2  // 将接口划分到 VLAN 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config)#int f0/2 &nbsp;  // 配置接口 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport mode access &nbsp;  // 设置该接口为正常访问模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960A(config-if)#switchport access vlan 3  // 将接口划分到 VLAN 3</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 361px;"></div><div class="CodeMirror-gutters" style="display: none; height: 361px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103201442283.png" referrerpolicy="no-referrer" alt="image-20220103201442283"></p><p><span>我们将在右边交换机 2960B 上进行同样的工作：</span></p><ol start='' ><li><span>加入名为 </span><code>cqjtu</code><span> VTP 域</span></li><li><span>配置与核心交换机 3560 连接的千兆接口 </span><code>g0/1</code><span> 为 </span><code>trunk</code><span> 模式</span></li><li><span>将接口 </span><code>f0/1</code><span> 划分到 </span><code>VLAN 2</code><span> 中</span></li><li><span>将接口 </span><code>f0/2</code><span> 划分到 </span><code>VLAN 3</code><span> 中</span></li></ol><h3><a name="2960b右边）-vtp-client-配置" class="md-header-anchor"></a><span>2960B（右边） VTP Client 配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="" style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch&gt;en</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch#conf t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">Switch(config)#hostname 2960B &nbsp;  // 更改交换机名称（可选）</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config)#vtp domain cqjtu &nbsp; // 加入名为 cqjtu 的 VTP 域</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config)#vtp mode client &nbsp;  // 设置模式为 VTP 客户</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config)#int g0/1 &nbsp;  // 配置与核心交换机 3560 连接的 g0/1 千兆接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport mode trunk &nbsp;  // 设置该接口为中继（trunk）模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport trunk allowed vlan all  // 允许为所有的 VLAN 中继</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config)#int f0/1 &nbsp;  // 配置接口 1</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport mode access &nbsp;  // 设置该接口为正常访问模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport access vlan 2  // 将接口划分到 VLAN 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config)#int f0/2 &nbsp;  // 配置接口 2</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport mode access &nbsp;  // 设置该接口为正常访问模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">2960B(config-if)#switchport access vlan 3  // 将接口划分到 VLAN 3</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 361px;"></div><div class="CodeMirror-gutters" style="display: none; height: 361px;"></div></div></div></pre><p><img src="\Duang.github.io\图片\image-20220103201504817.png" referrerpolicy="no-referrer" alt="image-20220103201504817"></p><p><span>至此，各交换机配置完毕。</span></p><p><span>此时在 3 个交换机的特权模式下，都可使用</span><code>show vtp status</code><span>命令查看 VTP 状态，使用</span><code>show vlan</code><span>命令查看 VLAN 状态</span></p><p><span>各 PC 连接的交换机和接口以及网络配置如下：</span></p><figure><table><thead><tr><th><strong><span>机器名</span></strong></th><th><strong><span>连接的交换机和接口</span></strong></th><th><strong><span>所属VLAN</span></strong></th><th><strong><span>IP</span></strong></th><th><strong><span>子网掩码</span></strong></th><th><strong><span>网关</span></strong></th></tr></thead><tbody><tr><td><span>PC0</span></td><td><span>2960A-F0/1</span></td><td><span>VLAN 2</span></td><td><span>192.168.1.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>PC1</span></td><td><span>2960A-F0/2</span></td><td><span>VLAN 3</span></td><td><span>192.168.2.2</span></td><td><span>255.255.255.0</span></td><td><span>192.168.2.1</span></td></tr><tr><td><span>PC2</span></td><td><span>2960B-F0/1</span></td><td><span>VLAN 2</span></td><td><span>192.168.1.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.1.1</span></td></tr><tr><td><span>PC3</span></td><td><span>2960B-F0/2</span></td><td><span>VLAN 3</span></td><td><span>192.168.2.3</span></td><td><span>255.255.255.0</span></td><td><span>192.168.2.1</span></td></tr></tbody></table></figure><p><span>至此，VTP 配置完成。同 VLAN 可以 </span><code>ping</code><span> 通，而不同 VLAN 不行（即使在同一交换机下，如从 PC0 到 PC1），且能够方便的统一规划和管理。</span></p><p><img src="\Duang.github.io\图片\image-20220103201547305.png" referrerpolicy="no-referrer" alt="image-20220103201547305"></p><p><span>✎ </span><strong><span>试一试</span></strong></p><p><span>使用 PC0（</span><code>192.168.1.2</code><span>） </span><code>ping</code><span> PC1（</span><code>192.168.2.2</code><span>） 的结果如何？使用 PC0 </span><code>ping</code><span> PC2 的结果如何？想想为什么？</span></p><p><span>答：PC0ping PC1 不能 ping 通 PC0 ping PC2 也不能 ping 通</span></p><h2><a name="vlan-间的通信" class="md-header-anchor"></a><span>VLAN 间的通信</span></h2><p><span>VTP 只是给我们划分和管理 VLAN 提供了方便，由上面的测试得知，目前我们仍然不能在 VLAN 间通信。</span></p><p><span>因为默认的，VLAN 间是不允许进行通信，此时我们需要所谓的独臂路由器在 VLAN 间为其进行转发！</span></p><p><span>我们使用的核心交换机 3560 是个 3 层交换机，可工作在网络层，也称路由交换机，即具有路由功能，能进行这种转发操作。</span></p><h3><a name="3560-交换机配置" class="md-header-anchor"></a><span>3560 交换机配置：</span></h3><pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang=""><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 8.02941px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560&gt;en</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560#conf t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#int g0/1 &nbsp;  // 配置连接左边 2960A 交换机的接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport trunk encapsulation dot1q &nbsp;  // 封装 VLAN 协议</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport mode trunk &nbsp; &nbsp; // 设置为中继模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport trunk allowed vlan all &nbsp; &nbsp; // 在所有 VLAN 间转发</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#int g0/2 &nbsp;  // 配置连接右边 2960B 交换机的接口</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport trunk encapsulation dot1q &nbsp;  //封装 VLAN 协议</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport mode trunk &nbsp; &nbsp; // 设置为中继模式</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#switchport trunk allowed vlan all &nbsp; &nbsp; // 在所有 VLAN 间转发</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config-if)#exit</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">3560(config)#ip routing &nbsp;  // 启用路由转发功能</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 294px;"></div><div class="CodeMirror-gutters" style="display: none; height: 294px;"></div></div></div></pre><p><span>至此，各 VLAN 中的 PC 可以正常通信。</span></p><h2><a name="dhcpdns及web服务器简单配置" class="md-header-anchor"></a><span>DHCP、DNS及Web服务器简单配置</span></h2><p><span>动态主机配置 DHCP、域名解析 DNS 以及 Web 服务在日常应用中作用巨大，我们构建如下简单的拓扑来进行练习。</span></p><p><img src="\Duang.github.io\图片\image-20220103201644900.png" referrerpolicy="no-referrer" alt="image-20220103201644900"></p><p><span>该拓扑中，服务器及客户机都连在同一交换机上。为简单起见，服务器 Server-PT 同时作为 DHCP、DNS 以及 Web 服务器，各客户机无需配置，将自动获取网络配置。</span></p><p><span>点击 CPT 拓扑图中的 Server 图标，设置其静态 IP 地址为 </span><code>19.89.6.4/24</code><span>，然后选择 </span><code>Service</code><span> 进行如下相关配置：</span></p><figure><table><thead><tr><th><strong><span>机器名</span></strong></th><th><strong><span>配置项目</span></strong></th><th><strong><span>说明</span></strong></th></tr></thead><tbody><tr><td><span>Server</span></td><td><span>HTTP</span></td><td><span>开启即可</span></td></tr><tr><td><span>Server</span></td><td><span>DNS</span></td><td><span>19.89.6.4：</span><a href='http://www.google.com' target='_blank' class='url'>www.google.com</a><span>、</span><a href='http://www.baidu.com' target='_blank' class='url'>www.baidu.com</a></td></tr><tr><td><span>Server</span></td><td><span>DHCP</span></td><td><span>地址池开始地址：19.89.6.10/24，并返回DNS地址</span></td></tr><tr><td><span>PC</span></td><td><span>网络配置</span></td><td><span>自动获取</span></td></tr></tbody></table></figure><p><img src="\Duang.github.io\图片\image-20220103201708682.png" referrerpolicy="no-referrer" alt="image-20220103201708682"></p><p><img src="\Duang.github.io\图片\image-20220103201724284.png" referrerpolicy="no-referrer" alt="image-20220103201724284"></p><p><span>✎ </span><strong><span>试一试</span></strong></p><ol start='' ><li><span>先查看各 PC，看看是否获得网络配置</span></li></ol><p><img src="\Duang.github.io\图片\image-20220103201746220.png" referrerpolicy="no-referrer" alt="image-20220103201746220"></p><ol start='' ><li><span>因为我们在 DNS 服务器中把谷歌和百度的 IP 都设为了 </span><code>19.89.6.4</code><span>，即 Server-PT，所以，如果打开 PC0 的浏览器，输入 </span><code>www.google.com</code><span> 或者 </span><code>www.baidu.com</code><span>，我们都应该看到默认的 Server-PT 这个 Web 服务器的主页（你也可进行编辑）</span></li></ol><p><img src="\Duang.github.io\图片\image-20220103201806447.png" referrerpolicy="no-referrer" alt="image-20220103201806447"></p><h2><a name="wlan初步配置" class="md-header-anchor"></a><span>WLAN初步配置</span></h2><p><span>WLAN 即 WiFi 当前也是广泛的应用在各种场景。</span></p><p><span>我们通过构建如下拓扑的一个家庭 WLAN 来练习一下其相关的配置：</span></p><p><img src="\Duang.github.io\图片\image-20220103201826557.png" referrerpolicy="no-referrer" alt="image-20220103201826557"></p><p><img src="\Duang.github.io\图片\image-20220103201850486.png" referrerpolicy="no-referrer" alt="image-20220103201850486"></p><p><img src="\Duang.github.io\图片\image-20220103201901052.png" referrerpolicy="no-referrer" alt="image-20220103201901052"></p><p><span>一般地，我们需要配置无线路由器的基本网络配置（IP、掩码、网关、DNS 等，现实中多为自动获取），然后再配置无线路由器的无线访问部分如连接密码及加密类型等，并开启 DHCP 功能等。有关配置请参考相关资料。</span></p></div>
</body>
</html>